// Generated by CoffeeScript 1.6.3
jQuery(function($) {
  var extractLast, literaturAjaxUrl, photoAjaxUrl, split, stelleUrl, texttypAjaxUrl;
  extractLast = function(term) {
    return split(term).pop();
  };
  split = function(val) {
    return val.split(/,\s*/);
  };
  texttypAjaxUrl = 'ajax.php?ajaxID=edfu::formularTextTyp';
  $('#edfu-texttyp').bind("keydown", function(event) {
    if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
      return event.preventDefault();
    }
  }).autocomplete({
    source: function(request, response) {
      return $.getJSON(texttypAjaxUrl, {
        term: extractLast(request.term)
      }, response);
    }
  });
  false;
  literaturAjaxUrl = 'ajax.php?ajaxID=edfu::formularLiteratur';
  $('#edfu-literatur').bind("keydown", function(event) {
    if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
      return event.preventDefault();
    }
  }).autocomplete({
    source: function(request, response) {
      return $.getJSON(literaturAjaxUrl, {
        term: extractLast(request.term)
      }, response);
    }
  });
  false;
  photoAjaxUrl = 'ajax.php?ajaxID=edfu::formularPhoto';
  $('#edfu-photos').bind("keydown", function(event) {
    if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
      return event.preventDefault();
    }
  }).autocomplete({
    source: function(request, response) {
      return $.getJSON(photoAjaxUrl, {
        term: request.term
      }, response);
    }
  });
  false;
  stelleUrl = 'ajax.php?ajaxID=edfu::checkStelle';
  return $('form[name="stelle"]').bind("keydown", function(event) {
    var bandUid, seiteStart, seiteStop, zeileStart, zeileStop;
    bandUid = $('#band').val();
    seiteStart = $('#seiteStart').val();
    zeileStart = $('#zeileStart').val();
    zeileStop = $('#zeileStop').val();
    seiteStop = $('#seiteStop').val();
    return $.post(stelleUrl, {
      bandUid: bandUid,
      seiteStart: seiteStart,
      seiteStop: seiteStop,
      zeileStart: zeileStart,
      zeileStop: zeileStop
    }, function(data) {
      var jsonData;
      jsonData = $.parseJSON(data);
      if (jsonData.length > 2) {
        return $('#stelleChecked').text("Stelle mit der Id " + $.parseJSON(jsonData)[0].uid + " vorhanden");
      }
    });
  });
});
